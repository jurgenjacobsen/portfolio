import{L as u,_ as M,b as z,c as n,e as r,g as t,f as j,m as B,j as A,k as a,F as L,l as P}from"./index.996b7ec9.js";function V(s){return new Promise(o=>{setTimeout(o,s)})}const E={data(){return{user:null,topSongs:null,topArtists:null,topAlbumns:null,fails:0}},async beforeMount(){const s=async()=>{if(this.user=await u.getUserInfo().catch(()=>console.log("Error fetching user info")),this.topSongs=await u.getUserTopSongs().catch(()=>console.log("Error fetching user top songs")),(!this.topSongs||!this.user)&&this.fails<3)return this.fails++,await V(1e4),console.log("Retrying..."),s();if(this.fails>=2){console.log("Failed to fetch data");return}this.topSongs.array.forEach(o=>{this.getSongArt(o)})};try{s().catch(o=>{console.log(o)})}catch{console.log("Error on mount")}},methods:{async getSongArt(s){var c,d;let o=await u.call("track.getInfo",`artist=${s.artist.name}_track=${s.name}_autocorrect=1`);!o.track||(this.topSongs.map.set(s.mbid,{...s,cover:(d=(c=o.track)==null?void 0:c.album)==null?void 0:d.image[3]["#text"]}),this.topSongs.array=Array.from(this.topSongs.map.values()))}}},F={class:"mt-28 mx-4 lg:mx-44 mb-8"},T=t("h1",{class:"font-extra font-bold text-5xl py-2"},"Music Activity",-1),D=t("p",{class:"font-mono font-semibold text-neutral-500"}," My latest activity on Spotify. ",-1),I={class:"mt-4 rounded-md p-2 bg-neutral-100 dark:bg-neutral-800/50 ring-1 ring-neutral-300/50 dark:ring-neutral-700/50"},N={class:"text-neutral-500 mt-12"},O=t("h1",{class:"font-xl font-semibold"},"DETAILS",-1),U={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-2"},Y={class:"flex space-x-4 items-center justify-between pr-2 py-2"},G=t("span",null,"Profile",-1),H={class:"flex space-x-2 items-center"},R=t("a",{class:"font-semibold flex-shrink-0",href:"https://open.spotify.com/user/j%C3%BCrgenjacobsen?si=71933d2d99604f6c",target:"_blank"}," @jurgenjacobsen ",-1),Z={class:"flex space-x-4 items-center justify-between sm:pl-2 pr-2 sm:pr-0 py-2"},q=t("span",{class:"flex-shrink-0"},"Account Age",-1),J={class:"flex space-x-2 items-center"},K={class:"truncate font-semibold"},Q=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"h-6 w-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),W={class:"flex space-x-4 items-center justify-between pr-2 py-2"},X=t("span",{class:"flex-shrink-0"},"Total Plays",-1),$={class:"flex space-x-2 items-center"},tt={class:"truncate font-semibold"},et=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",filled:"",class:"h-6 w-6"},[t("path",{"fill-rule":"evenodd",d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z","clip-rule":"evenodd"})],-1),st={class:"flex space-x-4 items-center justify-between sm:pl-2 pr-2 sm:pr-0 py-2"},ot=t("span",{class:"flex-shrink-0"},"Artists Count",-1),nt={class:"flex space-x-2 items-center"},rt={class:"truncate font-semibold"},lt=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 5 25 15  ",fill:"none  ",filled:"",class:"h-6 w-6"},[t("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),at={class:"my-16"},it=t("h1",{class:"text-neutral-700 font-bold"},"TOP SONGS (LAST 7 DAYS)",-1),ct={key:0,class:"grid grid-cols-1 lg:grid-cols-2 mt-4 gap-2"},dt={class:"p-4 rounded-md flex bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800/50 hover:dark:bg-neutral-800 transition-colors ring-1 ring-neutral-300/50 dark:ring-neutral-700/50"},ut=["src","alt"],ht={class:"px-4"},_t={class:"flex"},pt=["href"],mt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",filled:"",class:"ml-2 mt-1 h-4 w-4 text-neutral-500"},ft=t("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),gt=[ft],xt=["href"],yt={class:"rounded-md text-blurple bg-blue-600/10 ring-[0.5px] text-center py-1 mt-2 justify-bottom text-xs w-[5rem]"},vt={key:1,class:"text-blurple dark:text-inherit grid place-items-center mt-10"},wt={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 512 512",class:"h-12 w-12 animate-spin-slow"},bt=t("path",{d:"M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"},null,-1),kt=[bt],St={key:1,class:"opacity-75"};function At(s,o,c,d,l,Ct){var h,_,p,m,f,g,x,y,v,w;const C=z("SpotifyCard");return n(),r("main",null,[t("div",F,[t("div",null,[T,D,t("div",I,[j(C,{showAnywayProp:!0,bigSizeProp:!0})])]),t("div",N,[O,t("div",U,[t("div",Y,[G,t("div",H,[R,(_=(h=l.user)==null?void 0:h.image[3])!=null&&_["#text"]?(n(),r("div",{key:0,"smart-image":"true",class:"rounded-full h-6 w-6",style:B(`
              background-image: url("${(m=(p=l.user)==null?void 0:p.image[3])==null?void 0:m["#text"]}"); 
              background-position: center center; 
              background-size: cover;
              `)},null,4)):A("",!0)])]),t("div",Z,[q,t("div",J,[t("div",K,a(new Date().getFullYear()-2017)+" year(s) ",1),Q])]),t("div",W,[X,t("div",$,[t("div",tt,a((g=(f=l.user)==null?void 0:f.playcount)!=null?g:0),1),et])]),t("div",st,[ot,t("div",nt,[t("div",rt,a((y=(x=l.user)==null?void 0:x.artist_count)!=null?y:0),1),lt])])])]),t("div",at,[it,((v=l.topSongs)==null?void 0:v.array.length)>0?(n(),r("div",ct,[(n(!0),r(L,null,P((w=l.topSongs)==null?void 0:w.array.sort((e,i)=>i.playcount-e.playcount).slice(0,6),e=>{var i,b,k,S;return n(),r("div",dt,[t("img",{src:(i=e.cover)!=null?i:"https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png",alt:e.name,class:"w-20 h-20 rounded-md"},null,8,ut),t("div",ht,[t("h1",_t,[t("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},a(e.name),9,pt),((b=e==null?void 0:e["@attr"])==null?void 0:b.rank)==="1"?(n(),r("svg",mt,gt)):A("",!0)]),t("a",{class:"text-neutral-500",href:(k=e.artist)==null?void 0:k.url,target:"_blank",rel:"noopener noreferrer"},a((S=e.artist)==null?void 0:S.name),9,xt),t("p",yt,a(e.playcount)+" plays ",1)])])}),256))])):(n(),r("div",vt,[l.fails<3?(n(),r("svg",wt,kt)):(n(),r("span",St," LastFM API failed to respond. Please try again later. "))]))])])])}const zt=M(E,[["render",At]]);export{zt as default};
